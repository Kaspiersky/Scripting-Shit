-- Made this with ChatGPT and configured some things.

--// Services
local VirtualInputManager = game:GetService("VirtualInputManager")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KeyPressGui"
screenGui.Parent = player:WaitForChild("PlayerGui")

--// Create the main frame (draggable and with rounded corners)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Position = UDim2.new(0.5, -100, 0.5, -50)
mainFrame.Size = UDim2.new(0, 200, 0, 100)
mainFrame.Active = true
mainFrame.Draggable = true

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = mainFrame

--// Create a collapse button in the top-right corner of the main frame
local collapseButton = Instance.new("TextButton")
collapseButton.Name = "CollapseButton"
collapseButton.Parent = mainFrame
collapseButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
collapseButton.Position = UDim2.new(1, -60, 0, 0)
collapseButton.Size = UDim2.new(0, 30, 0, 30)
collapseButton.Text = "-"
collapseButton.TextColor3 = Color3.new(1, 1, 1)

local collapseCorner = Instance.new("UICorner")
collapseCorner.CornerRadius = UDim.new(0, 10)
collapseCorner.Parent = collapseButton

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
CloseButton.BorderSizePixel = 0
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14
CloseButton.AutoButtonColor = false
CloseButton.Parent = mainFrame

-- Close Button Functionality
CloseButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)
-- Add Corner Radius to Close Button
local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 10)
CloseCorner.Parent = CloseButton

--// Create a container frame for the key buttons (so we can toggle its visibility)
local keysFrame = Instance.new("Frame")
keysFrame.Name = "KeysFrame"
keysFrame.Parent = mainFrame
keysFrame.BackgroundTransparency = 1
keysFrame.Position = UDim2.new(0, 0, 0, 30)
keysFrame.Size = UDim2.new(0, 0, 1, -30)

--// Function to create a key button that simulates a key press
local function createKeyButton(letter, position)
    local btn = Instance.new("TextButton")
    btn.Name = letter .. "Button"
    btn.Parent = keysFrame
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    btn.Position = position
    btn.Size = UDim2.new(0, 50, 0, 50)
    btn.Text = letter:upper()
    btn.TextColor3 = Color3.new(1, 1, 1)
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 10)
    btnCorner.Parent = btn
    
    btn.MouseButton1Click:Connect(function()
        local keyCode = Enum.KeyCode[letter:upper()]
        -- Simulate key press down, wait a brief moment, then key release
        VirtualInputManager:SendKeyEvent(true, keyCode, false, nil)
        task.wait(0.1)
        VirtualInputManager:SendKeyEvent(false, keyCode, false, nil)
    end)
end

--// Create the three buttons with appropriate positions
createKeyButton("z", UDim2.new(0, 10, 0, 10))
createKeyButton("x", UDim2.new(0, 70, 0, 10))
createKeyButton("c", UDim2.new(0, 130, 0, 10))

--// Add functionality to collapse/expand the key buttons
local collapsed = false
local originalSize = mainFrame.Size
collapseButton.MouseButton1Click:Connect(function()
    collapsed = not collapsed
    if collapsed then
        keysFrame.Visible = false
        mainFrame:TweenSize(UDim2.new(0, 200, 0, 30), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.5, true)
        collapseButton.Text = "+"
    else
        keysFrame.Visible = true
        mainFrame:TweenSize(originalSize, Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.1, true)
        collapseButton.Text = "-"
    end
end)
